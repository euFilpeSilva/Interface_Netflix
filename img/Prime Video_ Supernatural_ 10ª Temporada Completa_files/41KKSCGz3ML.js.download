(()=>{var e={"./src/entrypoints/hydration/nav.tsx":(e,t,n)=>{"use strict";var r,a,s=n("./src/util/hydration/hydrateWidgets.tsx"),o=n("./node_modules/react/index.js"),i=n("./src/util/wrappers/ArgsContext.tsx"),c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},l=function(e){var t=e.href,n=e.rel,r=e.isHighlighted,a=e.text;return o.createElement("a",{href:t,rel:n,className:r?"pv-highlighted pv-ticked":""},a)},u=function(e){var t=e.label,n=e.locale,r=e.isHighlighted,a=e.languageToken,s=e.url,i=e.context,c="000-0000000-0000000"===i.sessionID;return o.createElement("form",{action:s,method:"POST"},o.createElement("input",{type:"hidden",name:"language",value:n}),!c&&o.createElement("input",{type:"hidden",name:"token",value:a}),!c&&o.createElement("input",{type:"hidden",name:"persistLanguage",value:"1"}),o.createElement("input",{type:"submit",value:t,className:r?"pv-highlighted pv-ticked":""}))},p=function(e){var t=e.languages,n=e.locales,r=e.languageToken,a=e.context;return t.length>0?t.map((function(e,t){return o.createElement("li",{key:t+"-"+e.locale,role:"menuitem"},o.createElement(u,{isHighlighted:e.isHighlighted,label:e.label,locale:e.locale,languageToken:r,url:e.url,context:a}))})):n.map((function(e,t){return o.createElement("li",{key:t+"-"+e.text,role:"menuitem"},o.createElement(l,c({},e)))}))},h=function(e){return o.createElement("li",{className:"pv-subnav-locales "+(e.removeIcon?"pv-subnav-no-icon":"")},o.createElement("input",{type:"checkbox",id:"pv-subnav-locales-menu-trigger",className:"pv-subnav-locales-toggle avu-screen-reader-only",name:"menu"}),o.createElement("label",{htmlFor:"pv-subnav-locales-menu-trigger",className:"pv-subnav-locales-menu-label"},e.text),o.createElement("ul",{role:"menu","aria-label":"submenu",className:"pv-subnav-locales-dropdown"},p(e)))},v=function(e){return o.createElement("div",{className:"pv-nav-locales pv-nav-dropl",id:"pv-nav-locales"},o.createElement("input",{type:"checkbox",autoComplete:"off",name:"pv-nav-locales",id:"pv-nav-locales-menu-trigger",className:"pv-nav-dropl__input avu-screen-reader-only"}),o.createElement("label",{htmlFor:"pv-nav-locales-menu-trigger",className:"pv-nav-dropl__label"},o.createElement("span",{className:"pv-nav-locales-icon"},e.text)),o.createElement("ul",{role:"menu"},o.createElement("ol",{className:"dv-col",role:"menu"},p(e))))},m=n("./src/util/utils/imageUtils/imageUtils.tsx"),d=function(e){return{backgroundImage:"url("+e+")"}},g=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),f=function(e){function t(t){var n=e.call(this,t)||this;return n.state={isReducedMotion:!1},n}return g(t,e),t.prototype.componentDidMount=function(){var e=window.matchMedia("(prefers-reduced-motion: reduce)");this.setState({isReducedMotion:e&&e.matches})},t.prototype.render=function(){var e=this.state.isReducedMotion&&this.props.imageURL&&"gif"===this.props.imageURL.split(".").pop()?function(e){return encodeURI(new m.e(e).forceFormat("png").getImageUrl())}(this.props.imageURL):this.props.imageURL;return o.createElement("a",{href:this.props.targetUrl,className:"pv-nav-logo",id:"pv-nav-logo"},o.createElement("div",{className:"pv-brand-logo",style:e?d(e):{}},this.props.altText))},t}(o.Component),E=n("./node_modules/@amzn/dvui/dist/Link.js");!function(e){e.PV_NAV_HOME="pv-nav-home",e.PV_NAV_MOVIES="pv-nav-movies",e.PV_NAV_TV_SHOWS="pv-nav-tv-shows",e.PV_NAV_KIDS="pv-nav-kids",e.PV_NAV_CHANNELS="pv-nav-channels",e.PV_NAV_STORE="pv-nav-store",e.PV_NAV_RENT_OR_BUY="pv-nav-rent-or-buy",e.PV_NAV_MYSTUFF="pv-nav-mystuff",e.PV_NAV_MYSTUFF_DROPDOWN="pv-nav-mystuff-dropdown",e.PV_NAV_MYSTUFF_WL="pv-nav-mystuff-wl",e.PV_NAV_MYSTUFF_LIBRARY="pv-nav-mystuff-library",e.PV_NAV_MYSTUFF_CHANNELS="pv-nav-mystuff-channels",e.PV_NAV_MYSTUFF_FOLLOWING="pv-nav-mystuff-following",e.PV_NAV_ORIGINALS="pv-nav-originals",e.PV_NAV_YOUR_ACCOUNT="pv-nav-your-account",e.PV_NAV_YOUR_WATCHLIST="pv-nav-your-watchlist",e.PV_NAV_PURCHASES_AND_RENTALS="pv-nav-purchases-and-rentals",e.PV_NAV_SETTINGS="pv-nav-settings",e.PV_NAV_WATCH_ANYWHERE="pv-nav-watch-anywhere",e.PV_NAV_HELP="pv-nav-help",e.PV_NAV_GETTING_STARTED="pv-nav-getting-started",e.PV_NAV_SIGN_IN="pv-nav-sign-in",e.PV_NAV_SIGN_OUT="pv-nav-sign-out",e.PV_NAV_EPL="pv-nav-epl",e.PV_NAV_SALE="pv-nav-sale",e.vPV_NAV_BLURAY="pv-nav-bluray",e.PV_NAV_SPORTS="pv-nav-sports",e.PV_NAV_PRIME_FILTERS="pv-nav-prime-filters",e.PV_NAV_ROLAND_GARROS="pv-nav-roland-garros",e.PV_NAV_LOCALE_PREFIX="pv-nav-locale",e.PV_NAV_CATEGORIES="pv-nav-categories",e.PV_NAV_CATEGORIES_MOVIES="pv-nav-categories-movies",e.PV_NAV_CATEGORIES_TVSHOWS="pv-nav-categories-tv-shows",e.PV_NAV_CATEGORIES_TV="pv-nav-categories-tv",e.PV_NAV_CATEGORIES_INCLUDED_WITH_PRIME="pv-nav-categories-included-with-prime",e.PV_NAV_CATEGORIES_KIDS="pv-nav-categories-kids",e.PV_NAV_CATEGORIES_ORIGINALS="pv-nav-categories-originals",e.PV_NAV_CATEGORIES_RECENTLY_ADDED="pv-nav-categories-recently-added",e.PV_NAV_CATEGORIES_TOP_RATED="pv-nav-categories-top-rated",e.PV_NAV_CATEGORIES_4K="pv-nav-categories-4k-uhd",e.PV_NAV_CATEGORIES_CHRISTMAS="pv-nav-categories-christmas",e.PV_NAV_CATEGORIES_FEATURED_DEALS="pv-nav-categories-featured-deals",e.PV_NAV_CATEGORIES_LEAVING_SOON="pv-nav-categories-leaving-soon",e.PV_NAV_CATEGORIES_NEW_RELEASES="pv-nav-categories-new-releases",e.PV_NAV_CATEGORIES_SPORTS="pv-nav-categories-sports",e.PV_NAV_CATEGORIES_EXPLORER="pv-nav-categories-prime-video-explorer",e.PV_NAV_CATEGORIES_COMING_SOON="pv-nav-categories-coming-soon",e.PV_NAV_CATEGORIES_SHORTS="pv-nav-categories-shorts",e.PV_NAV_CATEGORIES_DOWNLOADS="pv-nav-categories-download",e.PV_NAV_CATEGORIES_EUROPEAN_CONTENT="pv-nav-categories-european-content",e.PV_NAV_CATEGORIES_2020="pv-nav-categories-2020",e.PV_NAV_WINDOWS_DOWNLOADS="pv-nav-windows-downloads",e.PV_NAV_WINDOWS_SETTINGS="pv-nav-windows-settings",e.PV_NAV_WINDOWS_SEARCH="pv-nav-windows-search"}(a||(a={}));var y=n("./node_modules/classnames/index.js"),_=function(){return(_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},S=function(e){var t=e.text,n=e.links,r=e.isElcano,s=n.map((function(e,t){var n=Boolean(e.links&&e.links.length),r=n?e.links.map((function(e,t){return o.createElement("li",{key:"navsublistitem-"+t,className:"subitem"},o.createElement("a",{href:e.href},e.text))})):[];return o.createElement(o.Fragment,null,n?o.createElement("li",{key:t,className:"pv-nav-main-menu-subdropdown"},o.createElement("input",{type:"checkbox",autoComplete:"off",name:"pv-nav-main-menu-subdropdown",id:"pv-nav-main-menu-subdropdown-trigger-"+t}),o.createElement("label",{htmlFor:"pv-nav-main-menu-subdropdown-trigger-"+t,className:"pv-nav-main-menu-subdropdown-label"},o.createElement("a",{href:e.id===a.PV_NAV_MYSTUFF_DROPDOWN&&e.href,className:y({"pv-highlighted":e.isHighlighted})},o.createElement("span",{className:"pv-nav-main-menu-subdropdown-text"},e.text))),r&&o.createElement("ul",{className:"pv-nav-main-menu-subdropdown-flyout"},r)):o.createElement("li",{key:t},o.createElement(E.Link,_({},e,{className:y({"pv-highlighted":e.isHighlighted}),key:e.text}))))}));return o.createElement("div",{id:"pv-nav-main-menu",className:y("pv-nav-main-menu",{"pv-nav-main-menu-elcano":r})},o.createElement("input",{type:"checkbox",autoComplete:"off",id:"pv-nav-main-menu-trigger",className:"pv-nav-main-menu-switch avu-screen-reader-only"}),o.createElement("label",{htmlFor:"pv-nav-main-menu-trigger",className:"pv-nav-main-menu-label"},t),o.createElement("ul",{role:"navigation"},s))},N=function(){return o.createElement("div",{id:"pv-nav-main-menu",className:"pv-nav-main-menu"})},b=n("./src/util/api/WPSClient.ts"),I=n("./src/util/utils/dvstring/index.ts"),O=n("./node_modules/@amzn/dvui/dist/Button.js"),A=n("./node_modules/@amzn/dvui/dist/Modal.js"),P=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),T=function(){return(T=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},w=function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function i(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}c((r=r.apply(e,t||[])).next())}))},V=function(e,t){var n,r,a,s,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}},x="DEFAULT_PROFILE",k="searchHistory",R=function(e){function t(t){var n=e.call(this,t)||this;return n.hasSearchHistory=!1,n.hasSearchSuggested=!1,n.searchHistoryOn="T1"==n.props.searchHistory.treatment,n.modal=o.createRef(),n.openModal=function(){n.modal.current.open()},n.closeModal=function(){n.modal.current.close()},n.initializeSearchHistory=function(){for(var e=n.props.profiles,t=JSON.parse(localStorage.getItem(k)),r=e&&e.activeProfile?e.activeProfile.id:x,a=t&&t[r]?t[r]:{terms:[],expirationDates:{}},s=a.terms,o=a.expirationDates,i=(new Date).getTime(),c=s.length-1;c>=0&&parseInt(o[s[c]],10)<i;c--)delete o[s[c]],s.splice(c,1);n.setState({searchHistoryByProfile:{terms:s,expirationDates:o}})},n.storeSearchHistory=function(){var e,t,r=n.props.profiles,a=JSON.parse(localStorage.getItem(k)),s=r&&r.activeProfile?r.activeProfile.id:x,o=n.state.searchHistoryByProfile,i=a?T(T({},a),((e={})[s]=o,e)):((t={})[s]=o,t);localStorage.setItem(k,JSON.stringify(i))},n.state={searchHistory:[],searchSuggested:[],selectedSearchSuggestionId:-1},n.handleInput=n.handleInput.bind(n),n.handleReset=n.handleReset.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n.handleDocumentClick=n.handleDocumentClick.bind(n),n.WPS=new b.eZ,n}return P(t,e),t.prototype.render=function(){var e=this,t=this.props,n=this.state,r=Object.keys(t.searchFormAction.query).map((function(e){return o.createElement("input",{type:"hidden",name:e,key:e,value:t.searchFormAction.query[e]})})),a=this.props.shouldCollapse?"pv-nav-search pv-nav-search-collapsed":"pv-nav-search",s="pv-nav-search-suggestions "+(this.hasSearchHistory&&this.searchHistoryOn?"pv-nav-search-history":"")+" "+(this.hasSearchSuggested&&this.searchHistoryOn?"pv-nav-search-suggested":""),i=this.hasSearchHistory||this.hasSearchSuggested,c=o.createElement("ol",null,o.createElement("li",{className:"pv-nav-search-subheading suggested"},this.props.searchHistory.strings.suggested),o.createElement("ol",{ref:function(t){e.searchSuggestedList=t}},n.searchSuggested.map((function(e,t){var r=y({"pv-highlighted":t===n.selectedSearchSuggestionId},"pv-nav-search-suggestion-item"),a=(0,I.Wb)(e.text);return o.createElement("li",{className:"pv-nav-search-suggestion suggested"},o.createElement("a",{href:e.href,className:r,dangerouslySetInnerHTML:{__html:""+a}}))})))),l=o.createElement(A.Modal,{className:"pv-nav-search-clear-modal",modalId:"search-history",ref:this.modal,footer:o.createElement("div",null,o.createElement(O.PrimaryButton,{onClick:function(){e.clearSearchHistory(),e.closeModal()}},this.props.searchHistory.strings.clearInfoButton),o.createElement(O.Button,{onClick:function(){return e.closeModal()}}," ",this.props.searchHistory.strings.cancel," ")),header:this.props.searchHistory.strings.clearInfoTitle},this.props.searchHistory.strings.clearInfoMessage),u=o.createElement("ol",null,o.createElement("li",{className:"pv-nav-search-subheading history"},this.props.searchHistory.strings.recent,o.createElement("button",{className:"pv-nav-search-clear",onClick:function(){return e.openModal()}},this.props.searchHistory.strings.clear),l),o.createElement("ol",{ref:function(t){e.searchHistoryList=t}},n.searchHistory.map((function(t,r){var a=y({"pv-highlighted":r+n.searchSuggested.length===n.selectedSearchSuggestionId},"pv-nav-search-suggestion-item"),s=(0,I.Wb)(t.text),i=s.replace(/<\/?strong>/g,"");return o.createElement("li",{className:"pv-nav-search-suggestion history"},o.createElement("input",{type:"reset",className:"pv-nav-search-delete-history",name:"reset",value:"Cancel",onClick:function(){e.removeQueryFromHistory(i),e.fetchSearchHistory()}}),o.createElement("a",{href:t.href,className:a,dangerouslySetInnerHTML:{__html:""+s}}))}))));return o.createElement("div",{className:a,ref:function(t){e.searchBarContainer=t}},o.createElement("form",{className:"pv-nav-search-form",method:"GET",role:"search",action:t.searchFormAction.partialURL,onSubmit:this.handleSubmit,ref:function(t){e.searchForm=t}},o.createElement("label",{className:"pv-nav-screen-reader-only",htmlFor:"pv-search-nav"},t.altText),o.createElement("input",{type:"search",className:y({"pv-nav-search-query-search-history":this.hasSearchHistory&&this.searchHistoryOn},"pv-nav-search-query"),id:"pv-search-nav",required:!0,placeholder:t.searchFormPlaceholder,name:"phrase",autoComplete:"off",onInput:this.handleInput,onKeyUp:this.handleInput,onFocus:this.handleInput,onPaste:this.handleInput,onCut:this.handleInput,ref:function(t){e.searchInput=t}}),r,o.createElement("input",{type:"reset",className:"pv-nav-search-reset pv-nav-search-reset",name:"reset",value:"Cancel",onClick:this.handleReset,onReset:this.handleReset}),o.createElement("input",{type:"submit",className:"pv-nav-search-submit pv-nav-screen-reader-only"})),o.createElement("div",{className:s},o.createElement("ol",{className:i?"non-empty":""},o.createElement("li",null," ",c," "),o.createElement("li",null," ",u," "))))},t.prototype.componentDidMount=function(){window.addEventListener("click",this.handleDocumentClick),this.searchHistoryOn&&(window.addEventListener("beforeunload",this.storeSearchHistory),this.initializeSearchHistory()),this.props.searchPhrase&&this.searchInput&&(this.searchInput.value=this.props.searchPhrase)},t.prototype.componentWillUnmount=function(){window.removeEventListener("click",this.handleDocumentClick),this.searchHistoryOn&&window.removeEventListener("beforeunload",this.storeSearchHistory)},t.prototype.handleDocumentClick=function(e){var t=this.searchInput;this.searchBarContainer.contains(e.target)||this.clearSearchSuggestions(),this.searchHistoryOn&&this.searchSuggestedList.contains(e.target)?(t.value=e.target.innerText,this.updateSearchHistory(t.value)):this.searchHistoryOn&&this.searchHistoryList.contains(e.target)&&!this.searchHistoryList==e.target&&(this.submitSearchHistory(e.target.innerText),this.updateSearchHistory(t.value))},t.prototype.handleSubmit=function(e){this.state.selectedSearchSuggestionId>=0?e.preventDefault():this.searchHistoryOn&&this.updateSearchHistory(this.searchInput.value)},t.prototype.handleReset=function(){this.searchInput.value="",this.clearSearchSuggestions()},t.prototype.handleInput=function(e){var t=this,n=t.props,r=t.state,a=t.searchInput;if(n.searchSuggestionsEndpoint)if(!e.keyCode||38!==e.keyCode&&40!==e.keyCode)if(e.keyCode&&13===e.keyCode){if(r.selectedSearchSuggestionId>=0){if(r.selectedSearchSuggestionId<r.searchSuggested.length){var s=r.searchSuggested[r.selectedSearchSuggestionId];this.searchInput.value=this.searchSuggestedList.querySelector("li:nth-child("+(r.selectedSearchSuggestionId+1)+") a").innerText,window.location.assign(s.href)}this.setState({selectedSearchSuggestionId:-1}),this.searchHistoryOn&&(this.updateSearchHistory(a.value),this.submitSearchHistory(this.searchHistoryList.querySelector("li:nth-child("+(r.selectedSearchSuggestionId-this.state.searchSuggested.length+1)+") a").innerText)),e.preventDefault()}}else this.fetchSearchSuggestions(e.target.value),this.setState({selectedSearchSuggestionId:-1});else{var o=r.searchHistory.length+r.searchSuggested.length;o>0&&(38===e.keyCode?this.setState({selectedSearchSuggestionId:r.selectedSearchSuggestionId>0?r.selectedSearchSuggestionId-1:o-1}):40===e.keyCode&&this.setState({selectedSearchSuggestionId:r.selectedSearchSuggestionId<o-1?r.selectedSearchSuggestionId+1:0}),e.preventDefault())}},t.prototype.killSearchSuggestionsFetch=function(){this.state.searchSuggestionsFetchHandle&&window.clearTimeout(this.state.searchSuggestionsFetchHandle)},t.prototype.removeQueryFromHistory=function(e){var t=this.state.searchHistoryByProfile,n=t.terms,r=t.expirationDates,a=n.indexOf(e);-1!==a&&n.splice(a,1),delete r[e],this.setState({searchHistoryByProfile:{terms:n,expirationDates:r}})},t.prototype.updateSearchHistory=function(e){var t,n=(0,I.Wb)(e.replace(/[@#%^*(){}|<>]/g,"").toLowerCase());if(/\S/.test(n)){var r=this.state.searchHistoryByProfile,a=r.terms,s=r.expirationDates,o=a.indexOf(n);-1!==o&&a.splice(o,1);for(var i=50;i<=a.length;i++)delete s[a[i]],a.splice(a.length-1,1);a=[n].concat(a);var c=new Date;c.setMonth(c.getMonth()+18),s=T(T({},s),((t={})[n]=c.getTime(),t)),this.setState({searchHistoryByProfile:{terms:a,expirationDates:s}})}},t.prototype.submitSearchHistory=function(e){var t=this.searchInput,n=t.value.length;t.value=e,this.searchForm.action=this.searchForm.action.concat("_hist_"+n),this.searchForm.submit()},t.prototype.fetchSearchHistory=function(){for(var e=(0,I.Wb)(this.searchInput.value.toLowerCase()),t=this.hasSearchSuggested?5:10,n=this.state.searchHistoryByProfile.terms,r=[],a=0;a<n.length&&a<t;a++)n[a].includes(e)&&r.push({text:n[a],href:null});this.setState({searchHistory:r})},t.prototype.clearSearchHistory=function(){this.setState({searchHistoryByProfile:{terms:[],expirationDates:{}}})},t.prototype.clearSearchSuggestions=function(e){void 0===e&&(e=!0),this.killSearchSuggestionsFetch(),this.hasSearchSuggested=!1,this.setState({searchSuggested:[]}),e&&(this.hasSearchHistory=!1,this.setState({searchHistory:[]}))},t.prototype.fetchSearchSuggestions=function(e){var t=this,n=this;if(this.searchHistoryOn&&this.fetchSearchHistory(),e.length>=3){this.killSearchSuggestionsFetch();var r=window.setTimeout((function(){return w(t,void 0,void 0,(function(){var t,r,a;return V(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,this.WPS.SearchSuggestions({phrase:e,maxSuggestions:10,context:this.props.context})];case 1:return t=s.sent(),r=t?t.hasOwnProperty("suggestions")?t.suggestions:t:[],this.searchHistoryOn?n.setState({searchSuggested:r.slice(0,5)}):n.setState({searchSuggested:r}),[3,3];case 2:return a=s.sent(),this.props.logger.error("[atv_nav_iss_ajax_error]",a).count("AVNavIssAjaxErrors",1,!0),[3,3];case 3:return[2]}}))}))}),200);this.setState({searchSuggestionsFetchHandle:r}),this.hasSearchSuggested=!0}else this.clearSearchSuggestions(!1)},t.defaultProps={shouldCollapse:!1,searchFormAction:{partialURL:"",query:{}},searchFormPlaceholder:"",searchPhrase:"",altText:"",context:{},searchHistory:{treatment:"C",strings:{recent:"",suggested:"",clear:"",clearInfoTitle:"",clearInfoButton:"",clearInfoMessage:"",cancel:"",clearInfoAck:""}}},t}(o.Component),C=n("./src/util/utils/history.ts"),H=n("./node_modules/@amzn/dvui/dist/Icon.js"),L=n("./node_modules/@amzn/dvui/dist/Callout.js"),F="nav-account-menu-opened",D=function(){var e=document.getElementsByTagName("body")[0];e.classList.contains(F)?e.classList.remove(F):e.classList.add(F)},M=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),G=function(e){return o.createElement(o.Fragment,null,o.createElement("li",{className:"profile-item nav-profiles-menu-active-profile"},o.createElement("div",{style:{backgroundImage:"url("+e.activeProfile.avatarUrl+")"},className:"profile-avatar"}),e.activeProfile.name),e.otherProfiles.map((function(e,t){return o.createElement("form",{className:"profile-item",id:"profile-"+t,action:e.switchLink.partialURL,method:"POST"},o.createElement("input",{className:"profile-input-submit",type:"submit",id:"input-profile-"+t,name:"input-profile-"+t}),o.createElement("label",{htmlFor:"input-profile-"+t},o.createElement("li",null,o.createElement("div",{style:{backgroundImage:"url("+e.avatarUrl+")"},className:"profile-avatar"}),e.name)),Object.keys(e.switchLink.query).map((function(t){return o.createElement("input",{type:"hidden",name:t,value:e.switchLink.query[t]})})))})),e.canCreate&&e.links.createProfileNav?o.createElement("li",{className:"profile-item add-new"},o.createElement("a",{href:e.links.createProfileNav},o.createElement("div",{className:"profile-avatar"}),e.strings.DV_PROFILES_MANAGE_ADD_NEW)):null,o.createElement("li",{id:"manage-profiles"},o.createElement("a",{href:e.links.manageProfile,className:"nav-profiles-menu-link"},e.strings.DV_PROFILES_MANAGE)),o.createElement("li",null,o.createElement("a",{href:e.links.learnMore,className:"nav-profiles-menu-link","aria-label":e.strings.DV_PROFILES_INTRO_LINK},e.strings.DV_PROFILES_LEARNMORE)))},U=function(e){switch(e.tooltipType){case"INTRO":return o.createElement(o.Fragment,null,o.createElement("span",{className:"nav-profiles-tooltip-content nav-profiles-tooltip-heading"}," ",e.strings.DV_PROFILES_INTRO_HEADING," "),o.createElement("span",{className:"nav-profiles-tooltip-content nav-profiles-tooltip-text"}," ",e.strings.DV_PROFILES_INTRO_TEXT," "),o.createElement("span",{className:"nav-profiles-tooltip-content nav-profiles-tooltip-link"},o.createElement("a",{href:e.links.learnMore,onClick:function(e){e.stopPropagation()}}," ",e.strings.DV_PROFILES_INTRO_LINK," ")));case"ERROR":return o.createElement(o.Fragment,null,o.createElement("span",{className:"nav-profiles-tooltip-text"}," ",e.message," "));case"SWITCH_FAIL_OTHERS":return o.createElement(o.Fragment,null,o.createElement("span",{className:"nav-profiles-tooltip-text"}," ",e.strings.DV_PROFILES_GETCONTEXT_SWITCHING," "));case"SWITCH_FAIL_REAUTHENTICATION":return o.createElement(o.Fragment,null,o.createElement("span",{className:"nav-profiles-tooltip-text"}," ",e.strings.DV_PROFILES_SWITCHING_RE_AUTHENTICATION_ERROR," "))}},j=function(e){switch(e.tooltipType){case"INTRO":return"info";case"ERROR":case"SWITCH_FAIL_OTHERS":case"SWITCH_FAIL_REAUTHENTICATION":return"error"}},W=function(e){function t(t){return e.call(this,t)||this}return M(t,e),t.prototype.componentDidMount=function(){if(window&&window.history){var e=new URL(window.location.href);e.searchParams.has("switchSuccess")&&(e.searchParams.delete("switchSuccess"),(0,C.lO)(null,document.title,e.href))}},t.prototype.render=function(){var e=this,t="ERROR"==this.props.tooltipType?o.createElement(H.Icon,{use:H.IconType.ALERT_CRITICAL_BLOCK,className:"profile-avatar profile-error"}):o.createElement("div",{style:{backgroundImage:"url("+this.props.activeProfile.avatarUrl+")"},className:"profile-avatar"});return o.createElement(o.Fragment,null,o.createElement("input",{type:"checkbox",className:"nav-profiles-dropdown",onChange:D,name:"nav-menu",id:"nav-profiles-dropdown",defaultChecked:!1,ref:function(t){return e.profilesDropdownCheckbox=t}}),o.createElement("label",{id:"nav-profiles-dropdown-label",htmlFor:"nav-profiles-dropdown",className:y("pv-nav-dropl__label",{"pv-nav-error-label":"ERROR"==this.props.tooltipType})},this.props.tooltipType?o.createElement("span",{onClick:function(){return e.profilesDropdownCheckbox.checked=!e.profilesDropdownCheckbox.checked}},o.createElement(L.Callout,{startOpen:!0,size:"m",position:"bottom",content:U(this.props),use:j(this.props),className:"nav-profiles-tooltip nav-profiles-tooltip-"+this.props.tooltipType.toLowerCase()},t)):t,o.createElement("div",{className:"label-content"},o.createElement("span",{className:"profiles-dropdown-whos-watching"},this.props.strings.DV_PROFILES_WW),o.createElement("span",{className:"profiles-dropdown-name",dir:"auto"},this.props.activeProfile?this.props.activeProfile.name:""))))},t}(o.Component),B=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Y=function(){return(Y=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},q=function(e){var t=e.links,n=e.localeSelectionSubMenu,r=e.cerberus,a=e.strings,s=e.context,i=t.slice();n&&i.splice(n.dropdownIndex,0,n);var c=i.map((function(e){return e.link||e.locales?o.createElement(h,{locales:e.locales,removeIcon:!1,languages:e.languages,languageToken:e.languageToken,text:e.text||"",key:e.text,context:s}):o.createElement("li",{key:e.text,role:"menuitem"},o.createElement(E.Link,Y({},e,{key:e.text})))}));return r?o.createElement("ul",{role:"menu"},o.createElement("div",{className:"pv-nav-dropl-column nav-profiles-menu"},o.createElement("span",{className:"pv-accounts-cerberus-heading"}," ",a.Profiles||"Profiles"," "),r&&o.createElement(G,Y({},r))),o.createElement("div",{className:"pv-nav-dropl-column pv-nav-dropl-column-left"},o.createElement("span",{className:"pv-accounts-cerberus-heading"}," ",a.More||"More"," "),c)):o.createElement("ul",{role:"menu"},c)},z=function(e){return o.createElement("span",null,e.pre&&o.createElement("div",{className:"pv-nav-pre-text"},e.pre),o.createElement(E.Link,Y({},e)),e.post&&o.createElement("div",{className:"pv-nav-post-text"},e.post))},K=function(e){var t=e.link;return e.dropdownExists?o.createElement("span",{className:"pv-nav-link-with-droplist"},o.createElement(z,Y({},t))):o.createElement(z,Y({},t))},X=function(e){function t(t){var n=e.call(this,t)||this;return n.state={checked:!1,triggered:!1},n}return B(t,e),t.prototype.render=function(){var e=this.props,t=e.links,n=e.localeSelectionSubMenu,r=e.altText,a=e.cerberus,s=e.strings,i=e.context,c=a?o.createElement("div",{className:"pv-nav-accounts-cerberus nav-profiles pv-nav-dropl",id:"pv-nav-accounts-cerberus"},o.createElement(W,Y({},a)),o.createElement(q,{links:t,localeSelectionSubMenu:n,cerberus:a,strings:s,context:i})):o.createElement("div",{className:"pv-nav-accounts pv-nav-dropl",id:"pv-nav-accounts"},o.createElement("input",{onChange:D,type:"checkbox",autoComplete:"off",name:"pv-nav-accounts",id:"pv-nav-accounts-menu-trigger",className:"pv-nav-dropl__input avu-screen-reader-only"}),o.createElement("label",{htmlFor:"pv-nav-accounts-menu-trigger",className:"pv-nav-dropl__label"},o.createElement("span",{className:"pv-nav-account-icon"},r)),o.createElement(q,{links:t,localeSelectionSubMenu:n,context:i}));return o.createElement(o.Fragment,null,c)},t}(o.Component),J=function(e){var t=e.links,n=e.localeSelectionSubMenu,r=e.altText,a=e.vtr,s=e.cerberus,i=e.strings,c=e.context;return 1===t.length?o.createElement("span",{className:"pv-nav-accounts-single-link"},o.createElement(K,{link:t[0],dropdownExists:Boolean(n)}),n&&o.createElement(X,{links:Array(t[0]),localeSelectionSubMenu:n,altText:r,cerberus:s,strings:i,context:c})):o.createElement(X,{links:t,localeSelectionSubMenu:n,vtr:a,altText:r,cerberus:s,strings:i,context:c})},Q=function(e){var t=e.text,n=e.href;return o.createElement("div",{className:"pv-nav-sign-up-button"},o.createElement(O.PrimeButton,{href:n,className:"CTA-button"},t))},Z=n("./src/util/logger/logger.ts");new Z.Oc;var $=function(){return($=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};n("./src/widgets/Explore/Nav/Nav/index.module.scss"),n("./src/widgets/Explore/Nav/Nav/scripts/nav.ts");var ee={name:"nav",getProps:undefined,Component:(0,i.s6)((function(e){var t=e.logo,n=e.mainMenu,r=e.searchBar,a=e.yourAccount,s=e.cerberus,i=e.localeSelector,c=e.context,l=e.signUpCTA,u=e.logger,p=s?"pv-nav-cerberus":"",h=s&&"CHILD"===s.activeProfile.ageGroup?"pv-nav-cerberus-kids":"";return o.createElement("div",{className:"pv-nav-container "+p+" "+h},o.createElement(f,$({},t)),o.createElement("div",{className:"pv-nav-primary-components"},n?o.createElement(S,$({},n)):o.createElement(N,null),r&&o.createElement(R,$({},r,{logger:u,context:c,profiles:s})),l&&o.createElement(Q,$({},l)),i&&o.createElement(v,$({},i)),o.createElement(J,$({},a,{vtr:c.currentTerritory,cerberus:s,context:c}))))})),container:{tagName:"header",ID:"pv-nav",classes:["pv-nav","av-blur-backdrop"]}};(0,s.y)(ee)},"./src/widgets/Explore/Nav/Nav/scripts/nav.ts":()=>{if(void 0!==window.navigator&&window.navigator.userAgent.indexOf("Firefox")>-1||window.navigator.userAgent.indexOf("Edge")>-1||window.navigator.userAgent.indexOf("MSIE")>-1){var e=document.getElementById("pv-nav-locales-menu-trigger"),t=document.getElementById("pv-nav-accounts-menu-trigger"),n=document.getElementById("av-search-nav");e&&t&&(t.addEventListener("click",(function(){t.checked&&(e.checked=!1)})),e.addEventListener("click",(function(){e.checked&&(t.checked=!1)}))),n&&n.addEventListener("click",(function(){e&&e.checked&&(e.checked=!1),t&&t.checked&&(t.checked=!1)}))}},"./src/widgets/Explore/Nav/Nav/index.module.scss":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={"nav-asset-v1-0-0-12":"_3h3lwI"}},url:e=>{"use strict";e.exports=url}},t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.m=e,n.x=e=>{},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.j=411,(()=>{var e={411:0},t=[["./src/entrypoints/hydration/nav.tsx",216,351]],r=e=>{},a=(a,s)=>{for(var o,i,[c,l,u,p]=s,h=0,v=[];h<c.length;h++)i=c[h],n.o(e,i)&&e[i]&&v.push(e[i][0]),e[i]=0;for(o in l)n.o(l,o)&&(n.m[o]=l[o]);for(u&&u(n),a&&a(s);v.length;)v.shift()();return p&&t.push.apply(t,p),r()},s=self.webpackChunk_amzn_dvwebnode=self.webpackChunk_amzn_dvwebnode||[];function o(){for(var r,a=0;a<t.length;a++){for(var s=t[a],o=!0,i=1;i<s.length;i++){var c=s[i];0!==e[c]&&(o=!1)}o&&(t.splice(a--,1),r=n(n.s=s[0]))}return 0===t.length&&(n.x(),n.x=e=>{}),r}s.forEach(a.bind(null,0)),s.push=a.bind(null,s.push.bind(s));var i=n.x;n.x=()=>(n.x=i||(e=>{}),(r=o)())})();n.x()})();
//# sourceMappingURL=http://sourcemaps.aka.amazon.com/1.0.34689.0/sourcemaps/nav.7366f16111c25fbad370.js.map